[["Map",1,2,9,10,89,90,227,228,432,433],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.12.9","content-config-digest","ab5291c43a597793","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://shahid.pro/\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{\"light\":\"snazzy-light\",\"dark\":\"tokyo-night\"},\"wrap\":true,\"transformers\":[]},\"remarkPlugins\":[null],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"rawEnvValues\":false},\"legacy\":{\"collections\":false}}","projects",["Map",11,12,21,22,30,31,39,40,48,49,58,59,69,70,78,79],"bangla-calendar",{"id":11,"data":13,"filePath":19,"digest":20},{"name":11,"description":14,"url":15,"isPublished":16,"github":15,"createdAt":17,"updatedAt":18},"A small JavaScript library to convert any valid JavaScript date to Bangla date.","https://github.com/sh4hids/bangla-calendar",true,["Date","2023-11-02T01:11:23.742Z"],["Date","2023-11-02T01:11:23.742Z"],"src/content/projects/bangla-calendar.json","7541596958dbaa50","book-manager",{"id":21,"data":23,"filePath":28,"digest":29},{"name":21,"description":24,"url":25,"isPublished":16,"github":25,"createdAt":26,"updatedAt":27},"A simple library management app built with Electron, NeDB and React.","https://github.com/bdTechies/book-manager",["Date","2023-11-02T01:11:23.742Z"],["Date","2023-11-02T01:11:23.742Z"],"src/content/projects/book-manager.json","409a09018c9f4e01","dam-janun",{"id":30,"data":32,"filePath":37,"digest":38},{"name":30,"description":33,"url":34,"isPublished":16,"github":34,"createdAt":35,"updatedAt":36},"A project to show price comparison of a book in different shops in Bangladesh.","https://github.com/sh4hids/dam-janun",["Date","2024-05-15T15:17:25.091Z"],["Date","2024-05-15T15:17:25.091Z"],"src/content/projects/dam-janun.json","0e4ac51d2a2ba60b","deskaide",{"id":39,"data":41,"filePath":46,"digest":47},{"name":39,"description":42,"url":43,"isPublished":16,"github":43,"createdAt":44,"updatedAt":45},"An electron based desktop application to help managing pc usage.","https://github.com/deskaide/deskaide",["Date","2023-11-02T01:11:23.742Z"],["Date","2023-11-02T01:11:23.742Z"],"src/content/projects/deskaide.json","671aa1366992ef21","roshui-pronali",{"id":48,"data":50,"filePath":56,"digest":57},{"name":48,"description":51,"url":52,"isPublished":16,"github":53,"createdAt":54,"updatedAt":55},"A Bnagla recipe website built with Astro, React, and TailwindCSS","https://roshuipronali.shahid.pro/","https://github.com/sh4hids/roshui-pronali",["Date","2023-11-02T01:11:23.742Z"],["Date","2023-11-02T01:11:23.742Z"],"src/content/projects/roshui-pronali.json","648af6dbf1aa9066","prozuktischool",{"id":58,"data":60,"filePath":67,"digest":68},{"name":61,"description":62,"url":63,"isPublished":16,"github":64,"createdAt":65,"updatedAt":66},"prozuktischool.com","An open source bangla community blog site build with Gatsby and Styled Components.","https://prozuktischool.com","https://github.com/prozuktischool/prozuktischool.com",["Date","2024-05-15T15:12:18.875Z"],["Date","2024-05-15T15:12:18.875Z"],"src/content/projects/prozuktischool.json","c8b3bbc725e509f4","prayertiming-cli",{"id":69,"data":71,"filePath":76,"digest":77},{"name":69,"description":72,"url":73,"isPublished":16,"github":73,"createdAt":74,"updatedAt":75},"A command line tool to show Muslim prayer times based on coordinates.","https://github.com/sh4hids/prayertiming-cli",["Date","2024-05-15T15:11:07.146Z"],["Date","2024-05-15T15:11:07.146Z"],"src/content/projects/prayertiming-cli.json","9e67c1f3a6a8f44e","theme-open-sourcerer",{"id":78,"data":80,"filePath":87,"digest":88},{"name":81,"description":82,"url":83,"isPublished":16,"github":84,"createdAt":85,"updatedAt":86},"gatsby-theme-open-sourcerer","A configurable minimal gatsby portfolio theme for open source developers.","https://gatsby-theme-open-sourcerer.netlify.app/","https://github.com/sh4hids/gatsby-theme-open-sourcerer",["Date","2024-05-15T15:12:18.875Z"],["Date","2024-05-15T15:12:18.875Z"],"src/content/projects/theme-open-sourcerer.json","92d5c4f5d95cbfc1","plants",["Map",91,92,100,101,109,110,118,119,127,128,136,137,144,145,152,153,160,161,168,169,176,177,184,185,193,194,201,202,210,211,218,219],"asian-pigeonwings-01",{"id":91,"data":93,"filePath":98,"digest":99},{"name":94,"fileName":95,"isPublished":16,"createdAt":96,"updatedAt":97},"Asian Pegionwings","asian_pigeonwings_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/asian-pigeonwings-01.json","f37cd07bb0e3fb8c","inch-plant",{"id":100,"data":102,"filePath":107,"digest":108},{"name":103,"fileName":104,"isPublished":16,"createdAt":105,"updatedAt":106},"Inch Plant","inch_plants.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/inch-plant.json","d38c97a42c2e0150","morning-glory-01",{"id":109,"data":111,"filePath":116,"digest":117},{"name":112,"fileName":113,"isPublished":16,"createdAt":114,"updatedAt":115},"Morning Glory","morning_glory_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/morning-glory-01.json","d43cc09a518845a8","periwinkle-01",{"id":118,"data":120,"filePath":125,"digest":126},{"name":121,"fileName":122,"isPublished":16,"createdAt":123,"updatedAt":124},"Periwinkle","periwinkle_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/periwinkle-01.json","f4043972628d54f1","portulaca-03",{"id":127,"data":129,"filePath":134,"digest":135},{"name":130,"fileName":131,"isPublished":16,"createdAt":132,"updatedAt":133},"Portulaca","portulaca_03.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-03.json","c41d9e446a4dd3c5","portulaca-02",{"id":136,"data":138,"filePath":142,"digest":143},{"name":130,"fileName":139,"isPublished":16,"createdAt":140,"updatedAt":141},"portulaca_02.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-02.json","7c60763c76b3536a","portulaca-01",{"id":144,"data":146,"filePath":150,"digest":151},{"name":130,"fileName":147,"isPublished":16,"createdAt":148,"updatedAt":149},"portulaca_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-01.json","7642049ac6cf7626","portulaca-04",{"id":152,"data":154,"filePath":158,"digest":159},{"name":130,"fileName":155,"isPublished":16,"createdAt":156,"updatedAt":157},"portulaca_04.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-04.json","57435d33d1d9fe12","portulaca-06",{"id":160,"data":162,"filePath":166,"digest":167},{"name":130,"fileName":163,"isPublished":16,"createdAt":164,"updatedAt":165},"portulaca_06.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-06.json","84156d5c2cce2d2e","portulaca-05",{"id":168,"data":170,"filePath":174,"digest":175},{"name":130,"fileName":171,"isPublished":16,"createdAt":172,"updatedAt":173},"portulaca_05.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-05.json","dce3b410d00f29b5","portulaca-08",{"id":176,"data":178,"filePath":182,"digest":183},{"name":130,"fileName":179,"isPublished":16,"createdAt":180,"updatedAt":181},"portulaca_08.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-08.json","353f069a8c86ab78","rose-01",{"id":184,"data":186,"filePath":191,"digest":192},{"name":187,"fileName":188,"isPublished":16,"createdAt":189,"updatedAt":190},"Rose","rose_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/rose-01.json","2d89d26c8b911845","portulaca-07",{"id":193,"data":195,"filePath":199,"digest":200},{"name":130,"fileName":196,"isPublished":16,"createdAt":197,"updatedAt":198},"portulaca_07.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/portulaca-07.json","88f2d2b62bdde3a2","rain-lily-01",{"id":201,"data":203,"filePath":208,"digest":209},{"name":204,"fileName":205,"isPublished":16,"createdAt":206,"updatedAt":207},"Rain Lily","rain_lily_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/rain-lily-01.json","e21e173759090ae9","rose-02",{"id":210,"data":212,"filePath":216,"digest":217},{"name":187,"fileName":213,"isPublished":16,"createdAt":214,"updatedAt":215},"rose_02.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/rose-02.json","e73dc5378da6a357","water-lily-01",{"id":218,"data":220,"filePath":225,"digest":226},{"name":221,"fileName":222,"isPublished":16,"createdAt":223,"updatedAt":224},"Water Lily","water_lily_01.jpg",["Date","2022-11-24T12:00:00.000Z"],["Date","2022-11-24T12:00:00.000Z"],"src/content/plants/water-lily-01.json","63caa0c025821f9d","blog",["Map",229,230,263,264,301,302,333,334,363,364,395,396],"2024/01/07/completely-delete-objects-from-versioned-s3-bucket",{"id":229,"data":231,"body":239,"filePath":240,"digest":241,"rendered":242,"legacyId":262},{"title":232,"isPublished":16,"publishedAt":233,"tags":234,"metaInfo":237},"Completely Delete Objects From Versioned S3 Bucket",["Date","2024-01-07T03:45:29.958Z"],[235,236],"aws","aws s3",{"description":238},"Guide to completely deleting objects from versioned S3 bucket","Recently, I was working on a feature where we needed to delete some files from S3. I followed some instructions from AWS SDK documentation and completed the feature. While testing the feature, I got a successful response. But when I checked the S3 bucket, deleted file was still there.\n\nSo I did a little digging and found that our S3 bucket was a [versioning-enabled](https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html) bucket. In this type of S3 bucket [object does not get deleted on a simple delete request](https://docs.aws.amazon.com/AmazonS3/latest/userguide/DeletingObjectVersions.html#delete-request-use-cases). S3 adds a `Delete` marker in the bucket, and that marker becomes the current version of the object with a new ID. When someone tries to get the object, it will return 404, but it is still there.\n\nTo delete a version-enabled file, first of all we have to fetch all the versions . Then we need to delete each version of the file by providing the version ID with the file key in the delete request. To complete the process, finally we have to delete the file with no version id.\n\nLet's check how we can do this using AWS TypeScript SDK.\n\n## AWS SDK v2\n\n```ts\nimport aws from 'aws-sdk';\nconst s3 = new aws.S3();\n\nexport const deleteObject = async (bucket: string, fileKey: string) => {\n    const params = { Bucket: bucket, Prefix: fileKey };\n    const response = await s3.listObjectVersions(params).promise();\n\n    if (response.Versions?.length) {\n        for (const version of response.Versions) {\n            await s3\n                .deleteObject({\n                    Bucket: bucket,\n                    Key: fileKey,\n                    VersionId: version.VersionId,\n                })\n                .promise();\n        }\n    }\n\n    return await s3\n        .deleteObject({\n            Bucket: bucket,\n            Key: fileKey,\n            VersionId: 'null',\n        })\n        .promise();\n};\n```\n\n## AWS SDK v3\n\n```ts\nconst client = new S3Client({ region: process.env.AWS_REGION });\n\nexport const deleteObject = async (bucket: string, fileKey: string) => {\n    const deleteParams = {\n        Bucket: bucket,\n        Key: fileKey,\n    };\n\n    const listVersionsCommand = new ListObjectVersionsCommand({\n        Bucket: bucket,\n        Prefix: fileKey,\n    });\n\n    const response = await client.send(listVersionsCommand);\n\n    if (response?.Versions?.length) {\n        for (const version of response.Versions) {\n            const deleteVersionCommand = new DeleteObjectCommand({\n                ...deleteParams,\n                VersionId: version.VersionId,\n            });\n\n            await client.send(deleteVersionCommand);\n        }\n    }\n\n    const deleteCommand = new DeleteObjectCommand({\n        ...deleteParams,\n        VersionId: 'null',\n    });\n\n    return await client.send(deleteCommand);\n};\n```\n\nThanks for reading the post. I hope this was helpful to you.","src/content/blog/completely-delete-objects-from-versioned-s3-bucket.md","02e7cf89d68a025e",{"html":243,"metadata":244},"\u003Cp>Recently, I was working on a feature where we needed to delete some files from S3. I followed some instructions from AWS SDK documentation and completed the feature. While testing the feature, I got a successful response. But when I checked the S3 bucket, deleted file was still there.\u003C/p>\n\u003Cp>So I did a little digging and found that our S3 bucket was a \u003Ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html\">versioning-enabled\u003C/a> bucket. In this type of S3 bucket \u003Ca href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/DeletingObjectVersions.html#delete-request-use-cases\">object does not get deleted on a simple delete request\u003C/a>. S3 adds a \u003Ccode>Delete\u003C/code> marker in the bucket, and that marker becomes the current version of the object with a new ID. When someone tries to get the object, it will return 404, but it is still there.\u003C/p>\n\u003Cp>To delete a version-enabled file, first of all we have to fetch all the versions . Then we need to delete each version of the file by providing the version ID with the file key in the delete request. To complete the process, finally we have to delete the file with no version id.\u003C/p>\n\u003Cp>Let’s check how we can do this using AWS TypeScript SDK.\u003C/p>\n\u003Ch2 id=\"aws-sdk-v2\">AWS SDK v2\u003C/h2>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#7DCFFF\">import\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#0DB9D7\"> aws\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#7DCFFF\"> from\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">aws-sdk\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> s3\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> aws\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">S3\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#7DCFFF\">export\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\"> const\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> deleteObject\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\"> async\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#0DB9D7\"> string\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#0DB9D7\"> string\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> =>\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> params\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> Bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> Prefix\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\"> await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> s3\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">listObjectVersions\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">params\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">promise\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">    if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">Versions\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">?.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">length\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">        for\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> of\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">Versions\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">            await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> s3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">                .\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">deleteObject\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">                    Bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">                    Key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">                    VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">                })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">                .\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">promise\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\"> await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> s3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        .\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">deleteObject\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">            Bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">            Key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">            VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">null\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        })\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        .\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">promise\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"aws-sdk-v3\">AWS SDK v3\u003C/h2>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> client\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> S3Client\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> region\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> process\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#FF9E64\">AWS_REGION\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> })\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#7DCFFF\">export\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\"> const\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> deleteObject\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\"> async\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#0DB9D7\"> string\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#0DB9D7\"> string\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> =>\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> deleteParams\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">        Bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">        Key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> listVersionsCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> ListObjectVersionsCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">        Bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> bucket\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">        Prefix\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> fileKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    })\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\"> await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> client\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">send\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">listVersionsCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">    if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">?.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">Versions\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">?.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">length\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">        for\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> of\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> response\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">Versions\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">            const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> deleteVersionCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> DeleteObjectCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-weight:inherit;--shiki-dark:#F7768E;--shiki-dark-font-weight:bold\">                ...\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">deleteParams\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">                VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            })\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">            await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> client\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">send\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">deleteVersionCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> deleteCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> DeleteObjectCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-weight:inherit;--shiki-dark:#F7768E;--shiki-dark-font-weight:bold\">        ...\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">deleteParams\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">        VersionId\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">null\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    })\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\"> await\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> client\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">send\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">deleteCommand\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Thanks for reading the post. I hope this was helpful to you.\u003C/p>",{"headings":245,"localImagePaths":253,"remoteImagePaths":254,"frontmatter":255,"imagePaths":261},[246,250],{"depth":247,"slug":248,"text":249},2,"aws-sdk-v2","AWS SDK v2",{"depth":247,"slug":251,"text":252},"aws-sdk-v3","AWS SDK v3",[],[],{"title":232,"slug":229,"isPublished":16,"tags":256,"publishedAt":257,"metaInfo":258,"excerpt":259,"minutesRead":260},[235,236],"2024-01-07T03:45:29.958Z",{"description":238},"Recently, I was working on a feature where we needed to delete some files from S3. I followed some instructions from AWS SDK documentation and completed the feature...","2 min read",[],"completely-delete-objects-from-versioned-s3-bucket.md","2021/08/24/published-my-first-gatsby-theme",{"id":263,"data":265,"body":273,"filePath":274,"digest":275,"rendered":276,"legacyId":300},{"title":266,"isPublished":16,"publishedAt":267,"tags":268,"metaInfo":271},"Published My First Gatsby Theme",["Date","2021-08-24T14:23:01.497Z"],[269,270],"gatsby","gatsby theme",{"description":272},"I've published my first Gatsby theme, a great learning experience in my development journey. Dive into the details on my blog.","Recently I was planning to redesign my portfolio. I planned to make it minimal and focus on showcasing my open-source works and writings. As I was using gatsby and I open-sourced my site, I decided to build it as a gatsby theme.\n\nI had zero knowledge about developing a gatsby theme before starting the project. I started researching and found a great tutorial by Jason Lengstorf on [egghead.io](https://egghead.io/courses/gatsby-theme-authoring). I followed the tutorial and [documentation](https://www.gatsbyjs.com/docs/how-to/plugins-and-themes/building-themes/), and managed to build a minimal theme in a couple of days. It was so easy that I felt almost like developing a gatsby site.\n\nI started by designing the theme in Figma with the [Atomic Design Pattern](https://bradfrost.com/blog/post/atomic-web-design/). I made a design system with color, typography, shadow, and some components so that I don't have to remember the color name, font size while designing the pages. You can find the design on this [Figma link](https://www.figma.com/file/oHQ9wMCrJ8UqlHgLbGigCt/shahid.pro?node-id=0%3A1).\n\nAfter completing the basic design, I started researching for a good name. My theme focuses on showcasing open-source projects. So, it would be great to have the word `open-source` in it. I remember developer [Ahmad Awais](https://github.com/ahmadawais) used to call him `OpenSourcerer`, and dev.to founder Ben Halpern also likes to call him [full-time open sourcerer](https://dev.to/ben/job-title-full-time-open-sourcerer-1eh1). I checked on GitHub and Gatsby Plugin Library if the name already exists. It was available. So, I named my theme [gatsby-theme-open-sourcerer](https://github.com/sh4hids/gatsby-theme-open-sourcerer).\n\nNow let's have a look at the theme.\n\n## Features\n\n-   minimal in design\n-   markdown support for writing post\n-   page contents in `YAML` format\n-   open-source project showcasing with GitHub star count\n-   fully customizable\n\n## Installation\n\nA site can be bootstrapped easily with the theme by using the starter kit. Just run the following command (you have to have `gatsby-cli` installed).\n\n```bash\ngatsby new my-site https://github.com/sh4hids/gatsby-starter-open-sourcerer\n```\n\nNow navigate to the project folder and run `gatsby develop` to see your project in development mode.\n\n## Customization\n\nYou can customize each part of the theme either by customizing the configuration or by shadowing. You can find the detailed instructions on the [theme's readme](https://github.com/sh4hids/gatsby-theme-open-sourcerer#readme).\n\n## Hard Lesson\n\n> To shadow-sm a theme, we have to skip the `src` folder in the shadow-sm theme.\n> \u003Cbr> \u003Cbr>- [issues/14134](https://github.com/gatsbyjs/gatsby/issues/14134#issuecomment-510310389)\n\nHope you'll find the theme useful. If you use and like the theme, please give a star and make a PR to add your site on [showcase section](https://github.com/sh4hids/gatsby-theme-open-sourcerer#sites-built-with-this-theme).","src/content/blog/published-my-first-gatsby-theme.md","7a6849d1ef172e2a",{"html":277,"metadata":278},"\u003Cp>Recently I was planning to redesign my portfolio. I planned to make it minimal and focus on showcasing my open-source works and writings. As I was using gatsby and I open-sourced my site, I decided to build it as a gatsby theme.\u003C/p>\n\u003Cp>I had zero knowledge about developing a gatsby theme before starting the project. I started researching and found a great tutorial by Jason Lengstorf on \u003Ca href=\"https://egghead.io/courses/gatsby-theme-authoring\">egghead.io\u003C/a>. I followed the tutorial and \u003Ca href=\"https://www.gatsbyjs.com/docs/how-to/plugins-and-themes/building-themes/\">documentation\u003C/a>, and managed to build a minimal theme in a couple of days. It was so easy that I felt almost like developing a gatsby site.\u003C/p>\n\u003Cp>I started by designing the theme in Figma with the \u003Ca href=\"https://bradfrost.com/blog/post/atomic-web-design/\">Atomic Design Pattern\u003C/a>. I made a design system with color, typography, shadow, and some components so that I don’t have to remember the color name, font size while designing the pages. You can find the design on this \u003Ca href=\"https://www.figma.com/file/oHQ9wMCrJ8UqlHgLbGigCt/shahid.pro?node-id=0%3A1\">Figma link\u003C/a>.\u003C/p>\n\u003Cp>After completing the basic design, I started researching for a good name. My theme focuses on showcasing open-source projects. So, it would be great to have the word \u003Ccode>open-source\u003C/code> in it. I remember developer \u003Ca href=\"https://github.com/ahmadawais\">Ahmad Awais\u003C/a> used to call him \u003Ccode>OpenSourcerer\u003C/code>, and dev.to founder Ben Halpern also likes to call him \u003Ca href=\"https://dev.to/ben/job-title-full-time-open-sourcerer-1eh1\">full-time open sourcerer\u003C/a>. I checked on GitHub and Gatsby Plugin Library if the name already exists. It was available. So, I named my theme \u003Ca href=\"https://github.com/sh4hids/gatsby-theme-open-sourcerer\">gatsby-theme-open-sourcerer\u003C/a>.\u003C/p>\n\u003Cp>Now let’s have a look at the theme.\u003C/p>\n\u003Ch2 id=\"features\">Features\u003C/h2>\n\u003Cul>\n\u003Cli>minimal in design\u003C/li>\n\u003Cli>markdown support for writing post\u003C/li>\n\u003Cli>page contents in \u003Ccode>YAML\u003C/code> format\u003C/li>\n\u003Cli>open-source project showcasing with GitHub star count\u003C/li>\n\u003Cli>fully customizable\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"installation\">Installation\u003C/h2>\n\u003Cp>A site can be bootstrapped easily with the theme by using the starter kit. Just run the following command (you have to have \u003Ccode>gatsby-cli\u003C/code> installed).\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">gatsby\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> new\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> my-site\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> https://github.com/sh4hids/gatsby-starter-open-sourcerer\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now navigate to the project folder and run \u003Ccode>gatsby develop\u003C/code> to see your project in development mode.\u003C/p>\n\u003Ch2 id=\"customization\">Customization\u003C/h2>\n\u003Cp>You can customize each part of the theme either by customizing the configuration or by shadowing. You can find the detailed instructions on the \u003Ca href=\"https://github.com/sh4hids/gatsby-theme-open-sourcerer#readme\">theme’s readme\u003C/a>.\u003C/p>\n\u003Ch2 id=\"hard-lesson\">Hard Lesson\u003C/h2>\n\u003Cblockquote>\n\u003Cp>To shadow-sm a theme, we have to skip the \u003Ccode>src\u003C/code> folder in the shadow-sm theme.\n\u003Cbr> \u003Cbr>- \u003Ca href=\"https://github.com/gatsbyjs/gatsby/issues/14134#issuecomment-510310389\">issues/14134\u003C/a>\u003C/p>\n\u003C/blockquote>\n\u003Cp>Hope you’ll find the theme useful. If you use and like the theme, please give a star and make a PR to add your site on \u003Ca href=\"https://github.com/sh4hids/gatsby-theme-open-sourcerer#sites-built-with-this-theme\">showcase section\u003C/a>.\u003C/p>",{"headings":279,"localImagePaths":292,"remoteImagePaths":293,"frontmatter":294,"imagePaths":299},[280,283,286,289],{"depth":247,"slug":281,"text":282},"features","Features",{"depth":247,"slug":284,"text":285},"installation","Installation",{"depth":247,"slug":287,"text":288},"customization","Customization",{"depth":247,"slug":290,"text":291},"hard-lesson","Hard Lesson",[],[],{"title":266,"slug":263,"isPublished":16,"publishedAt":295,"tags":296,"metaInfo":297,"excerpt":298,"minutesRead":260},"2021-08-24T14:23:01.497Z",[269,270],{"description":272},"Recently I was planning to redesign my portfolio. I planned to make it minimal and focus on showcasing my open-source works and writings. As I was using gatsby...",[],"published-my-first-gatsby-theme.md","2021/09/22/how-to-generate-api-key-and-secret-to-protect-api",{"id":301,"data":303,"body":310,"filePath":311,"digest":312,"rendered":313,"legacyId":332},{"title":304,"isPublished":16,"publishedAt":305,"tags":306,"metaInfo":308},"How To Generate API Key And Secret To Protect API",["Date","2021-09-22T03:45:29.958Z"],[307],"API",{"description":309},"Learn the steps to generate API keys and secrets for safeguarding API in this comprehensive tutorial.","I have used a lot of third-party APIs for the last four years. Most of them provided keys and secrets (API key/Client ID, API/Client secret) to access the API. I was also planning to develop some services where I would provide APIs. So, I was wondering how to generate API keys and API secrets for my services.\n\nI started researching and read a lot of articles and StackOverflow questions regarding this topic. I found out that there are some common rules. I will try to summarize what I have learned about generating API keys and secrets in this post.\n\n## API Key or Client ID\n\nAn API key or Client ID is a unique key to identify a user. Like a username or email, it must be unique. It should be unguessable too. We don't have to encrypt it. We can generate an API key by using the `crypto` package from Node.js. You can use the following code to generate an API key.\n\n```javascript\nconst { randomBytes } = require('crypto');\n\nfunction generateKey(size = 32, format = 'base64') {\n    const buffer = crypto.randomBytes(size);\n    return buffer.toString(format);\n}\n\nconsole.log(generateKey());\n// will generate something like:\n// 0NY4IrzHgLnRZUCWpxSnXLpn+Qjb1YfEj0UmnQaJiTw=\n```\n\n## API Secret or Client Secret\n\nAn API/Client secret is a secure key to provide secure access to an API. It must be unique and unguessable. We must store it in hashed form because it's just like a password. It is a good practice to use different secret keys for different scopes in APIs. For example, we can use a key to `Create` and `Update` articles and another key to `Read` user list and details.\n\nWe can generate a random unique key using our previous `generateKey` method and hash the result using `scryptSync` from the `crypto` package. We will send the unhashed key to users and asked them to store the key safely. One of the shortcomings of this approach is that the user won't see the key again if the user forgets the key. You can use the following code to generate a hashed version of the key.\n\n```javascript\nconst { scryptSync, randomBytes, timingSafeEqual } = require('crypto');\n\nfunction generateSecretHash(key) {\n  const salt = randomBytes(8).toString('hex');\n  const buffer = scryptSync(key, salt, 64) as Buffer;\n  return `${buffer.toString('hex')}.${salt}`;\n}\n\n// used the previous function\nconst key = generateKey(); // send to user: Jj0fmQUis7xKJ6oge4r1fN4em7xJ+hILrgubKlG6PLA=\nconst secretHash = generateSecretHash(key); // save in db: c10c7e79fc496144ee245d9dcbe52d9d3910c2a514af1cfe8afda9ea655815efed5bd2a793b31bf923fe47d212bab7896cd527c720849678077e34cdd6fec0a2.2f717b397644fdcc\n```\n\nWe can use the following code to compare and validate an API secret.\n\n```javascript\nfunction compareKeys(storedKey, suppliedKey) {\n  const [hashedPassword, salt] = storedKey.split('.');\n\n  const buffer = scryptSync(suppliedKey, salt, 64) as Buffer;\n  return timingSafeEqual(Buffer.from(hashedPassword, 'hex'), buffer);\n}\n```\n\nI hope you've got a general guideline about generating API keys and secrets. To know more about this, you can follow the following links:\n\nResources:\n\n-   [The Client ID and Secret](https://www.oauth.com/oauth2-servers/client-registration/client-id-secret/)\n-   [How services generate and use public and secret API keys?](https://stackoverflow.com/questions/55009503/how-services-generate-and-use-public-and-secret-api-keys)\n-   [What's the best approach for generating a new API key?](https://stackoverflow.com/questions/14412132/whats-the-best-approach-for-generating-a-new-api-key)\n-   [Do I need to hash or encrypt API keys before storing them in a database?](https://security.stackexchange.com/questions/180345/do-i-need-to-hash-or-encrypt-api-keys-before-storing-them-in-a-database)\n-   [Need advices on API key & secret generation?](https://security.stackexchange.com/questions/180367/need-advices-on-api-key-secret-generation)\n-   [Best practices for building secure API Keys](https://www.freecodecamp.org/news/best-practices-for-building-api-keys-97c26eabfea9/)\n-   [Crypto](https://nodejs.org/api/crypto.html)","src/content/blog/how-to-generate-api-key-and-secret-to-protect-api.md","aa8fcbecaf868b75",{"html":314,"metadata":315},"\u003Cp>I have used a lot of third-party APIs for the last four years. Most of them provided keys and secrets (API key/Client ID, API/Client secret) to access the API. I was also planning to develop some services where I would provide APIs. So, I was wondering how to generate API keys and API secrets for my services.\u003C/p>\n\u003Cp>I started researching and read a lot of articles and StackOverflow questions regarding this topic. I found out that there are some common rules. I will try to summarize what I have learned about generating API keys and secrets in this post.\u003C/p>\n\u003Ch2 id=\"api-key-or-client-id\">API Key or Client ID\u003C/h2>\n\u003Cp>An API key or Client ID is a unique key to identify a user. Like a username or email, it must be unique. It should be unguessable too. We don’t have to encrypt it. We can generate an API key by using the \u003Ccode>crypto\u003C/code> package from Node.js. You can use the following code to generate an API key.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> {\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> randomBytes\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> require\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">crypto\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> generateKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">size\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 32\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\"> format\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">base64\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> crypto\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">randomBytes\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">size\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">toString\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">format\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">console\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">log\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">generateKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">())\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">// will generate something like:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">// 0NY4IrzHgLnRZUCWpxSnXLpn+Qjb1YfEj0UmnQaJiTw=\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"api-secret-or-client-secret\">API Secret or Client Secret\u003C/h2>\n\u003Cp>An API/Client secret is a secure key to provide secure access to an API. It must be unique and unguessable. We must store it in hashed form because it’s just like a password. It is a good practice to use different secret keys for different scopes in APIs. For example, we can use a key to \u003Ccode>Create\u003C/code> and \u003Ccode>Update\u003C/code> articles and another key to \u003Ccode>Read\u003C/code> user list and details.\u003C/p>\n\u003Cp>We can generate a random unique key using our previous \u003Ccode>generateKey\u003C/code> method and hash the result using \u003Ccode>scryptSync\u003C/code> from the \u003Ccode>crypto\u003C/code> package. We will send the unhashed key to users and asked them to store the key safely. One of the shortcomings of this approach is that the user won’t see the key again if the user forgets the key. You can use the following code to generate a hashed version of the key.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> {\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> scryptSync\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> randomBytes\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> timingSafeEqual\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> require\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">crypto\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> generateSecretHash\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> salt\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> randomBytes\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\">8\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">toString\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">hex\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> scryptSync\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> salt\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 64\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> as\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> Buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">  return\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> `\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">${\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">toString\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">hex\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">}\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">.\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">${\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">salt\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">`\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">// used the previous function\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> generateKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> // send to user: Jj0fmQUis7xKJ6oge4r1fN4em7xJ+hILrgubKlG6PLA=\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> secretHash\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> generateSecretHash\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">key\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> // save in db: c10c7e79fc496144ee245d9dcbe52d9d3910c2a514af1cfe8afda9ea655815efed5bd2a793b31bf923fe47d212bab7896cd527c720849678077e34cdd6fec0a2.2f717b397644fdcc\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>We can use the following code to compare and validate an API secret.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> compareKeys\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">storedKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\"> suppliedKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\">hashedPassword\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> salt\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> storedKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">split\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">.\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">  const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> scryptSync\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">suppliedKey\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> salt\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 64\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> as\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> Buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">  return\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> timingSafeEqual\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">Buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">from\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">hashedPassword\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">hex\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> buffer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>I hope you’ve got a general guideline about generating API keys and secrets. To know more about this, you can follow the following links:\u003C/p>\n\u003Cp>Resources:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://www.oauth.com/oauth2-servers/client-registration/client-id-secret/\">The Client ID and Secret\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/55009503/how-services-generate-and-use-public-and-secret-api-keys\">How services generate and use public and secret API keys?\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://stackoverflow.com/questions/14412132/whats-the-best-approach-for-generating-a-new-api-key\">What’s the best approach for generating a new API key?\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://security.stackexchange.com/questions/180345/do-i-need-to-hash-or-encrypt-api-keys-before-storing-them-in-a-database\">Do I need to hash or encrypt API keys before storing them in a database?\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://security.stackexchange.com/questions/180367/need-advices-on-api-key-secret-generation\">Need advices on API key &#x26; secret generation?\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.freecodecamp.org/news/best-practices-for-building-api-keys-97c26eabfea9/\">Best practices for building secure API Keys\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://nodejs.org/api/crypto.html\">Crypto\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":316,"localImagePaths":323,"remoteImagePaths":324,"frontmatter":325,"imagePaths":331},[317,320],{"depth":247,"slug":318,"text":319},"api-key-or-client-id","API Key or Client ID",{"depth":247,"slug":321,"text":322},"api-secret-or-client-secret","API Secret or Client Secret",[],[],{"title":304,"slug":301,"isPublished":16,"publishedAt":326,"tags":327,"metaInfo":328,"excerpt":329,"minutesRead":330},"2021-09-22T03:45:29.958Z",[307],{"description":309},"I have used a lot of third-party APIs for the last four years. Most of them provided keys and secrets (API key/Client ID, API/Client secret) to access the...","3 min read",[],"how-to-generate-api-key-and-secret-to-protect-api.md","2021/10/29/setting-up-eslint-and-prettier-in-a-node-project",{"id":333,"data":335,"body":344,"filePath":345,"digest":346,"rendered":347,"legacyId":362},{"title":336,"isPublished":16,"publishedAt":337,"tags":338,"metaInfo":342},"Setting Up ESLint And Prettier In A Node Project",["Date","2021-10-29T03:45:29.958Z"],[339,340,341],"node.js","ESLint","Prettier",{"description":343},"A simple guide on how to easily set up ESLint and Prettier in a Node.js project.","One of the best ways to make a codebase maintainable and consistent is to follow a proper code formatting and coding style. In a codebase with only one contributor, IDE can do the task of code formatting and linting (with some configuration and plugins). But where there are multiple contributors, maintaining proper formatting and linting is very difficult without any automated process. Everyone has their preferences regarding code formatting and coding style.\n\nIn this post, I will try to show the step-by-step process of setting up prettier and eslint.\n\n## Setting Up ESLint and Prettier\n\nESLint is a static code analysis tool for identifying problematic patterns found in JavaScript code. It was created by Nicholas C. Zakas in 2013. Rules in ESLint are configurable, and customized rules can be defined and loaded. ESLint covers both code quality and coding style issues. [[Wikipedia](https://en.wikipedia.org/wiki/ESLint)]\n\nThere are many popular style guides for JavaScript. We will be using the one provided by Airbnb ([Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)). You can initialize the setup process by running the following command in your project folder.\n\n```bash\n$ npx eslint --init\n```\n\nThere will be a prompt asking some questions regarding the configurations. Choose the options necessary based on your project.\n\nWe need a few more packages for eslint to work with prettier. Run the following command in your terminal/cmd.\n\n```bash\n$ npm i -D eslint-plugin-prettier prettier @trivago/prettier-plugin-sort-imports eslint-config-prettier\n```\n\nNow open `.eslintrc.js` in your text editor and customize the configuration to match the following. You can add or customize any rules here.\n\n```js\nmodule.exports = {\n    // other config\n    extends: ['airbnb-base', 'prettier'],\n    plugins: ['prettier'],\n    // other config\n    rules: {\n        'prettier/prettier': ['error'],\n    },\n};\n```\n\nNow create a file named `.prettierrc.js` and paste the following code. You can customize the settings as your project needs.\n\n```js\nmodule.exports = {\n    printWidth: 80,\n    tabWidth: 2,\n    singleQuote: true,\n    trailingComma: 'es5',\n    importOrder: ['^@core/(.*)$', '^@server/(.*)$', '^@ui/(.*)$', '^[./]'],\n    importOrderSeparation: true,\n    experimentalBabelParserPluginsList: ['classProperties'],\n};\n```\n\nIn your favorite text editor, add the prettier and eslint plugin and enable format on save option. Now prettier will format code on saving, eslint will show warning or error if there is any problem in your code.\n\nYou can add the following scripts in your `package.json` file. So that whenever you want to format or lint the entire codebase, you only have to run an npm command.\n\n```json\n{\n    \"scripts\": {\n        // other scripts\n        \"prettier\": \"prettier --ignore-path .gitignore \\\"**/*.+(js|json)\\\"\",\n        \"check-format\": \"npm run prettier -- --list-different\",\n        \"format\": \"npm run prettier -- --write\",\n        \"lint\": \"eslint --ignore-path .gitignore --ext .js\"\n    }\n}\n```\n\nIn another post, I will try to show how to automate the process of linting and code formatting of the entire codebase before each commit to git.","src/content/blog/setting-up-eslint-and-prettier-in-a-node-project.md","8d75a4f147385908",{"html":348,"metadata":349},"\u003Cp>One of the best ways to make a codebase maintainable and consistent is to follow a proper code formatting and coding style. In a codebase with only one contributor, IDE can do the task of code formatting and linting (with some configuration and plugins). But where there are multiple contributors, maintaining proper formatting and linting is very difficult without any automated process. Everyone has their preferences regarding code formatting and coding style.\u003C/p>\n\u003Cp>In this post, I will try to show the step-by-step process of setting up prettier and eslint.\u003C/p>\n\u003Ch2 id=\"setting-up-eslint-and-prettier\">Setting Up ESLint and Prettier\u003C/h2>\n\u003Cp>ESLint is a static code analysis tool for identifying problematic patterns found in JavaScript code. It was created by Nicholas C. Zakas in 2013. Rules in ESLint are configurable, and customized rules can be defined and loaded. ESLint covers both code quality and coding style issues. [\u003Ca href=\"https://en.wikipedia.org/wiki/ESLint\">Wikipedia\u003C/a>]\u003C/p>\n\u003Cp>There are many popular style guides for JavaScript. We will be using the one provided by Airbnb (\u003Ca href=\"https://github.com/airbnb/javascript\">Airbnb JavaScript Style Guide\u003C/a>). You can initialize the setup process by running the following command in your project folder.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">$\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npx\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> eslint\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> --init\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>There will be a prompt asking some questions regarding the configurations. Choose the options necessary based on your project.\u003C/p>\n\u003Cp>We need a few more packages for eslint to work with prettier. Run the following command in your terminal/cmd.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">$\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> i\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> -D\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> eslint-plugin-prettier\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> prettier\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> @trivago/prettier-plugin-sort-imports\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> eslint-config-prettier\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now open \u003Ccode>.eslintrc.js\u003C/code> in your text editor and customize the configuration to match the following. You can add or customize any rules here.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"js\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">module\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">exports\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">    // other config\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    extends\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">airbnb-base\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">prettier\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    plugins\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">prettier\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">    // other config\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    rules\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#9ECE6A\">prettier/prettier\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">error\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now create a file named \u003Ccode>.prettierrc.js\u003C/code> and paste the following code. You can customize the settings as your project needs.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"js\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">module\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">exports\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    printWidth\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 80\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    tabWidth\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 2\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    singleQuote\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    trailingComma\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">es5\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    importOrder\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">^@core/(.*)$\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">^@server/(.*)$\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">^@ui/(.*)$\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">^[./]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    importOrderSeparation\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    experimentalBabelParserPluginsList\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">classProperties\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>In your favorite text editor, add the prettier and eslint plugin and enable format on save option. Now prettier will format code on saving, eslint will show warning or error if there is any problem in your code.\u003C/p>\n\u003Cp>You can add the following scripts in your \u003Ccode>package.json\u003C/code> file. So that whenever you want to format or lint the entire codebase, you only have to run an npm command.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">    \"\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#7AA2F7\">scripts\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\">        // other scripts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        \"\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#0DB9D7\">prettier\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">prettier --ignore-path .gitignore \u003C/span>\u003Cspan style=\"color:#F5B900;--shiki-dark:#89DDFF\">\\\"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">**/*.+(js|json)\u003C/span>\u003Cspan style=\"color:#F5B900;--shiki-dark:#89DDFF\">\\\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        \"\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#0DB9D7\">check-format\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">npm run prettier -- --list-different\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        \"\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#0DB9D7\">format\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">npm run prettier -- --write\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        \"\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#0DB9D7\">lint\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">eslint --ignore-path .gitignore --ext .js\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>In another post, I will try to show how to automate the process of linting and code formatting of the entire codebase before each commit to git.\u003C/p>",{"headings":350,"localImagePaths":354,"remoteImagePaths":355,"frontmatter":356,"imagePaths":361},[351],{"depth":247,"slug":352,"text":353},"setting-up-eslint-and-prettier","Setting Up ESLint and Prettier",[],[],{"title":336,"slug":333,"isPublished":16,"publishedAt":357,"tags":358,"metaInfo":359,"excerpt":360,"minutesRead":330},"2021-10-29T03:45:29.958Z",[339,340,341],{"description":343},"One of the best ways to make a codebase maintainable and consistent is to follow a proper code formatting and coding style. In a codebase with only one...",[],"setting-up-eslint-and-prettier-in-a-node-project.md","2021/09/11/load-google-analytics-gtag-efficiently-in-gatsby-site",{"id":363,"data":365,"body":372,"filePath":373,"digest":374,"rendered":375,"legacyId":394},{"title":366,"isPublished":16,"publishedAt":367,"tags":368,"metaInfo":370},"Load Google Analytics (Gtag) Efficiently In Gatsby Site",["Date","2021-09-11T03:18:59.475Z"],[269,369],"Google Analytics",{"description":371},"Optimize gtag loading in Gatsby for better performance.","Working with the gatsby.js site and google analytics is a little bit tricky if you consider performance. With the latest lighthouse version (v6 and above), performance reduces a lot if you have Google Tag Manager (especially if you install `gatsby-plugin-google-analytics`). A few months back, I even removed analytics from one of my sites as I was obsessed with performance.\n\nBut I didn't want to remove analytics from my newly built site and didn't want to reduce the performance too. So, I started researching for a solution and found a way to delay loading the analytics script [here](https://github.com/gatsbyjs/gatsby/issues/24332#issuecomment-752373784). I modified the script to match the new gtag script setup. It injects the gtag script after a certain period or if a user starts interacting with the site.\n\n## Setting up gtag\n\nWe need to add the following script in our `gatsby-browser.js` file. Here we are using an environment variable to hide our google analytics tracking id. You should add a `.env` file and provide the value for `GATSBY_GA_TRACKING_ID` there. You can adjust the script loading delay in the `onreadystatechange` method (I got the best result for 3500 ms).\n\n```javascript\nfunction initGTM() {\n    if (window.isGTMLoaded) {\n        return false;\n    }\n\n    window.isGTMLoaded = true;\n\n    const script = document.createElement('script');\n\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = `https://www.googletagmanager.com/gtag/js?id=${process.env.GATSBY_GA_TRACKING_ID}`;\n\n    script.onload = () => {\n        window.dataLayer = window.dataLayer || [];\n        function gtag() {\n            dataLayer.push(arguments);\n        }\n        gtag('js', new Date());\n\n        gtag('config', `${process.env.GATSBY_GA_TRACKING_ID}`);\n    };\n\n    document.head.appendChild(script);\n}\n\nfunction loadGTM(event) {\n    initGTM();\n    event.currentTarget.removeEventListener(event.type, loadGTM);\n}\n\nexports.onClientEntry = () => {\n    document.onreadystatechange = () => {\n        if (document.readyState !== 'loading') {\n            setTimeout(initGTM, 3500);\n        }\n    };\n\n    document.addEventListener('scroll', loadGTM);\n    document.addEventListener('mousemove', loadGTM);\n    document.addEventListener('touchstart', loadGTM);\n};\n```\n\n## Add tracking ID on GitHub Action env\n\nI am using GitHub Action to automate the deployment of my site. So, I have to read the environment variable from the deployment server. We can provide a `.env` file in our project, but this will not be secure. We can use GitHub's project secret to hide our credentials/secrets. Navigate to your project's settings page and go to the `Secrets` page from the menu. Now, add a repository secret named `GATSBY_GA_TRACKING_ID` and provide your tracking id as a value.\n\nIn your workflow configuration file add a section called `env`. In the `env` section add the environment variable like shown below. You should keep in mind that, `env` section should come before the `jobs` section in your workflow configuration.\n\n```yaml\nname: GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n\nenv:\n  GATSBY_GA_TRACKING_ID: ${{secrets.GATSBY_GA_TRACKING_ID}}\n\njobs:\n  deploy:\n  ......\n  ......\n```\n\n## Hard Lesson\n\n> If you want to access the environment variable in the BROWSER in a Gatsby site, prefix your variable name with `GATSBY_`.\n\nThanks a lot for reading the post, and please share if you find it useful.","src/content/blog/load-google-analytics-gtag-efficiently-in-gatsby-site.md","73f0211b9e0f7319",{"html":376,"metadata":377},"\u003Cp>Working with the gatsby.js site and google analytics is a little bit tricky if you consider performance. With the latest lighthouse version (v6 and above), performance reduces a lot if you have Google Tag Manager (especially if you install \u003Ccode>gatsby-plugin-google-analytics\u003C/code>). A few months back, I even removed analytics from one of my sites as I was obsessed with performance.\u003C/p>\n\u003Cp>But I didn’t want to remove analytics from my newly built site and didn’t want to reduce the performance too. So, I started researching for a solution and found a way to delay loading the analytics script \u003Ca href=\"https://github.com/gatsbyjs/gatsby/issues/24332#issuecomment-752373784\">here\u003C/a>. I modified the script to match the new gtag script setup. It injects the gtag script after a certain period or if a user starts interacting with the site.\u003C/p>\n\u003Ch2 id=\"setting-up-gtag\">Setting up gtag\u003C/h2>\n\u003Cp>We need to add the following script in our \u003Ccode>gatsby-browser.js\u003C/code> file. Here we are using an environment variable to hide our google analytics tracking id. You should add a \u003Ccode>.env\u003C/code> file and provide the value for \u003Ccode>GATSBY_GA_TRACKING_ID\u003C/code> there. You can adjust the script loading delay in the \u003Ccode>onreadystatechange\u003C/code> method (I got the best result for 3500 ms).\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"javascript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> initGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">    if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">window\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">isGTMLoaded\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic\">        return\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> false\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    window\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">isGTMLoaded\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-light-font-style:inherit;--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic\">    const\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#BB9AF7\"> script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">createElement\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">type\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">text/javascript\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">async\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">src\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> `\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">https://www.googletagmanager.com/gtag/js?id=\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">${\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">process\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#FF9E64\">GATSBY_GA_TRACKING_ID\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">`\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">onload\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> ()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> =>\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">        window\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">dataLayer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> window\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">dataLayer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> ||\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> []\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">        function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> gtag\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">            dataLayer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">push\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#F7768E\">arguments\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">        gtag\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">js\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#89DDFF\"> new\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> Date\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">())\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">        gtag\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">config\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> `\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">${\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">process\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#FF9E64\">GATSBY_GA_TRACKING_ID\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#7DCFFF\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">`\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">head\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">appendChild\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">script\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">function\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\"> loadGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#E0AF68\">event\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">    initGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    event\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">currentTarget\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">removeEventListener\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">event\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">type\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> loadGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">exports\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">onClientEntry\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> ()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> =>\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">onreadystatechange\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> ()\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> =>\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#BB9AF7\">        if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> (\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#7DCFFF\">readyState\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#BB9AF7\"> !==\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">loading\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">            setTimeout\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">initGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 3500\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">addEventListener\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">scroll\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> loadGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">addEventListener\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">mousemove\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> loadGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\">    document\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#09A1ED;--shiki-dark:#7AA2F7\">addEventListener\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">(\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">touchstart\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#C0CAF5\"> loadGTM\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">)\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"add-tracking-id-on-github-action-env\">Add tracking ID on GitHub Action env\u003C/h2>\n\u003Cp>I am using GitHub Action to automate the deployment of my site. So, I have to read the environment variable from the deployment server. We can provide a \u003Ccode>.env\u003C/code> file in our project, but this will not be secure. We can use GitHub’s project secret to hide our credentials/secrets. Navigate to your project’s settings page and go to the \u003Ccode>Secrets\u003C/code> page from the menu. Now, add a repository secret named \u003Ccode>GATSBY_GA_TRACKING_ID\u003C/code> and provide your tracking id as a value.\u003C/p>\n\u003Cp>In your workflow configuration file add a section called \u003Ccode>env\u003C/code>. In the \u003Ccode>env\u003C/code> section add the environment variable like shown below. You should keep in mind that, \u003Ccode>env\u003C/code> section should come before the \u003Ccode>jobs\u003C/code> section in your workflow configuration.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> GitHub Pages\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\">on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">  push\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    branches\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">      -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> main\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">  GATSBY_GA_TRACKING_ID\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{secrets.GATSBY_GA_TRACKING_ID}}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">jobs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">  deploy\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\">  ......\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\">  ......\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"hard-lesson\">Hard Lesson\u003C/h2>\n\u003Cblockquote>\n\u003Cp>If you want to access the environment variable in the BROWSER in a Gatsby site, prefix your variable name with \u003Ccode>GATSBY_\u003C/code>.\u003C/p>\n\u003C/blockquote>\n\u003Cp>Thanks a lot for reading the post, and please share if you find it useful.\u003C/p>",{"headings":378,"localImagePaths":386,"remoteImagePaths":387,"frontmatter":388,"imagePaths":393},[379,382,385],{"depth":247,"slug":380,"text":381},"setting-up-gtag","Setting up gtag",{"depth":247,"slug":383,"text":384},"add-tracking-id-on-github-action-env","Add tracking ID on GitHub Action env",{"depth":247,"slug":290,"text":291},[],[],{"title":366,"slug":363,"isPublished":16,"publishedAt":389,"tags":390,"metaInfo":391,"excerpt":392,"minutesRead":330},"2021-09-11T03:18:59.475Z",[269,369],{"description":371},"Working with the gatsby.js site and google analytics is a little bit tricky if you consider performance. With the latest lighthouse version (v6 and above), performance reduces a...",[],"load-google-analytics-gtag-efficiently-in-gatsby-site.md","2023/02/20/release-electron-app-to-github-using-semantic-release-and-electron-builder",{"id":395,"data":397,"body":405,"filePath":406,"digest":407,"rendered":408,"legacyId":431},{"title":398,"isPublished":16,"publishedAt":399,"tags":400,"metaInfo":403},"Release Electron App To GitHub Using Semantic Release And Electron Builder",["Date","2023-02-20T03:45:29.958Z"],[401,402],"Electron","CI/CD",{"description":404},"Release Electron app to GitHub automatically using Semantic Release and Electron Builder for efficient deployment.","I have been working on a personal desktop project ([Deskaide](https://github.com/deskaide/deskaide)) for about one year and finished some basic features recently. So I decided to publish an alpha version to GitHub. Instead of upgrading the version number and publishing it manually, I was looking for a way to automate the process.\n\nThe template I was following to structure the project uses electron builder to build the project. It uses the current date as the upcoming version number. It seems okay, but the version number does not indicate what type of changes it includes. I believe [semantic-release](https://github.com/semantic-release/semantic-release) has the solution, and I used it in some of my other projects.\n\nI started exploring a solution. I found an [electron release plugin](https://github.com/mystster/semantic-release-github-electron-builder) for the semantic release package but found it complicated. I decided to hack the semantic release process and use it only to update the version number (it can publish) and push the tag to GitHub. Electron builder can publish the release to GitHub, so I don't need any extra hacking to publish the release. The process looks like this:\n\n-   Configure semantic release\n-   Prepare the npm script\n-   Configure GitHub action\n\nLet's explore the process in detail.\n\n## Configure semantic release\n\nFirst, we will install `semantic-release` as a dev dependency with other related plugins.\n\n```sh\nnpm i -D semantic-release @semantic-release/commit-analyzer @semantic-release/npm @semantic-release/git semantic-release-export-data\n```\n\nNow we need to configure it in such a way that it will calculate the upcoming version number from the commit message and expose it to the GitHub workflow environment. We need to add the following code in a file named `release.config.js` at the root of our project folder.\n\n```js\nmodule.exports = {\n    branches: [\n        'main',\n        'next',\n        'next-major',\n        { name: 'beta', prerelease: true },\n        { name: 'alpha', prerelease: true },\n    ],\n    plugins: [\n        '@semantic-release/commit-analyzer',\n        'semantic-release-export-data',\n        '@semantic-release/npm',\n        [\n            '@semantic-release/git',\n            {\n                assets: ['package.json', 'package-lock.json'],\n            },\n        ],\n    ],\n};\n```\n\nHere [semantic-release-export-data](https://github.com/felipecrs/semantic-release-export-data) plugin will help us to expose the next release version to the GitHub\naction environment. We will use that version number to name our releases in the build step.\n\n## Prepare the npm script\n\nWe need an npm script to run the `semantic-release` command. In our `package.json` in the scripts section, we will add the following commands:\n\n```json\n\"release\": \"electron-builder --config .electron-builder.config.js --publish always\",\n\"updateVersion\": \"semantic-release\"\n```\n\nIn the `release` script, we added `--publish always` to tell electron builder to publish it to GitHub.\n\n## Configure GitHub action\n\nNow we will configure our GitHub workflow to combine all the steps.\n\n-   First, we will set up a job to run semantic-release in dry mode to expose the upcoming version number (if releasable) to the GitHub action environment (job name `get-next-version`)\n-   Then, we will create a release draft with a release note (job name `draft`)\n-   Finally, we will build the production release and upload the artifacts to GitHub (job name `upload_artifacts`).\n\nBefore building the production release, we will run the `updateVersion` script we defined earlier. It will generate the upcoming version number and tag and push the version tag to GitHub. Then we will put the version number in a file named `meta.json` inside our `buildResources` folder at the root of our project. Finally, we will build our project for production and run the `release` script to release the app to GitHub. Following is the complete workflow configuration:\n\n````yaml\nname: Release A New Version\non: [workflow_call, workflow_dispatch]\n\nconcurrency:\n    group: release-${{ github.ref }}\n    cancel-in-progress: true\n\ndefaults:\n    run:\n        shell: 'bash'\nenv:\n    GH_TOKEN: ${{ secrets.github_token }}\n\njobs:\n    get-next-version:\n        runs-on: ubuntu-latest\n        steps:\n            - uses: actions/checkout@v3\n            - uses: actions/setup-node@v3\n              with:\n                  node-version: 16\n            - run: npm ci\n              env:\n                  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD: 1\n            - run: npx semantic-release --dry-run\n              id: get-next-version\n              env:\n                  GITHUB_TOKEN: ${{ secrets.github_token }}\n        outputs:\n            new-release-published: ${{ steps.get-next-version.outputs.new-release-published }}\n            new-release-version: ${{ steps.get-next-version.outputs.new-release-version }}\n\n    draft:\n        needs: [get-next-version]\n        runs-on: ubuntu-latest\n        if: needs.get-next-version.outputs.new-release-published == 'true'\n        steps:\n            - uses: actions/checkout@v3\n              with:\n                  fetch-depth: 0\n\n            - uses: actions/setup-node@v3\n              with:\n                  node-version: 16\n\n            - name: Show version\n              run: echo \"Next Version is ${{ needs.get-next-version.outputs.new-release-version }} (${{ github.ref_name }})\"\n\n            - name: Get last git tag\n              id: tag\n              run: echo \"last-tag=$(git describe --tags --abbrev=0 || git rev-list --max-parents=0 ${{github.ref}})\" >> $GITHUB_OUTPUT\n\n            - name: Generate release notes\n              uses: ./.github/actions/release-notes\n              id: release-note\n              with:\n                  from: ${{ steps.tag.outputs.last-tag }}\n                  to: ${{ github.ref }}\n                  include-commit-body: true\n                  include-abbreviated-commit: true\n\n            - name: Delete outdated drafts\n              uses: hugo19941994/delete-draft-releases@v1.0.0\n              env:\n                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n            - name: Create Release Draft\n              uses: softprops/action-gh-release@v1\n              env:\n                  GITHUB_TOKEN: ${{ secrets.github_token }}\n              with:\n                  prerelease: true\n                  draft: true\n                  tag_name: v${{ needs.get-next-version.outputs.new-release-version }}\n                  name: v${{ needs.get-next-version.outputs.new-release-version }}\n                  body: ${{ steps.release-note.outputs.release-note }}\n        outputs:\n            release-note: ${{ steps.release-note.outputs.release-note }}\n            version: ${{ needs.get-next-version.outputs.new-release-version }}\n\n    upload_artifacts:\n        needs: [draft]\n\n        strategy:\n            matrix:\n                os: [macos-latest, ubuntu-latest, windows-latest]\n\n        runs-on: ${{ matrix.os }}\n\n        steps:\n            - uses: actions/checkout@v3\n            - uses: actions/setup-node@v3\n              with:\n                  node-version: 16\n                  cache: 'npm'\n\n            - run: npm ci\n              env:\n                  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD: 1\n\n            - name: Prepare release notes\n              env:\n                  RELEASE_NOTE: ${{ needs.draft.outputs.release-note }}\n              run: echo \"$RELEASE_NOTE\" >> ./buildResources/release-notes.md\n\n            - name: Show version\n              run: echo \"Next Version is ${{ needs.draft.outputs.version }} (${{ github.ref_name }})\"\n\n            - name: Update and push version tag\n              run: npm run updateVersion\n\n            - name: Write next version to meta.json\n              run: echo \"{\\\"version\\\":\\\"${{ needs.draft.outputs.version }}\\\"}\" >| ./buildResources/meta.json\n\n            - name: Build the app\n              env:\n                  MODE: 'production'\n              run: npm run build\n\n            - name: Compile & release Electron app\n              id: release-to-github\n              env:\n                  VITE_APP_VERSION: ${{ needs.draft.outputs.version }}\n              run: npm run release\n\n            - name: Delete tag for failed release\n              if: steps.release-to-github.outcome == 'failure'\n              run: git push --delete origin v${{ needs.draft.outputs.version }}```\n````\n\nIf you want to see the complete process in action or want to contribute to the open source `Deskaide` project, please check out the [repository](https://github.com/deskaide/deskaide) here.\n\n## Hard Lesson\n\n> If you use modular GitHub workflows (different jobs in different files) and any lower-level actions need to access any secret value, you must tell the root workflow to pass the secret value to that action.\n\nIn my `ci.yaml` file:\n\n```yaml\n# This workflow is the entry point for all CI processes.\n# It is from here that all other workflows launch.\non:\n    push:\n        branches:\n            - main\n            - alpha\n            - beta\n        paths-ignore:\n            - '**.md'\n            - .editorconfig\n            - .gitignore\n    pull_request:\n        paths-ignore:\n            - '**.md'\n            - .editorconfig\n            - .gitignore\n\nconcurrency:\n    group: ci-${{ github.ref }}\n    cancel-in-progress: true\n\njobs:\n    lint:\n        uses: ./.github/workflows/lint.yml\n    typechecking:\n        uses: ./.github/workflows/typechecking.yml\n    tests:\n        uses: ./.github/workflows/tests.yml\n    draft_release:\n        if: github.event_name == 'push' && (github.ref_name == 'alpha' || github.ref_name == 'beta' || github.ref_name == 'main')\n        needs: [typechecking, tests]\n        uses: ./.github/workflows/release.yml\n        secrets: inherit # \u003C- THIS IS WHAT I AM TALKING ABOUT\n```","src/content/blog/release-electron-app-to-github-using-semantic-release-and-electron-builder.md","1a8c08c6ad185032",{"html":409,"metadata":410},"\u003Cp>I have been working on a personal desktop project (\u003Ca href=\"https://github.com/deskaide/deskaide\">Deskaide\u003C/a>) for about one year and finished some basic features recently. So I decided to publish an alpha version to GitHub. Instead of upgrading the version number and publishing it manually, I was looking for a way to automate the process.\u003C/p>\n\u003Cp>The template I was following to structure the project uses electron builder to build the project. It uses the current date as the upcoming version number. It seems okay, but the version number does not indicate what type of changes it includes. I believe \u003Ca href=\"https://github.com/semantic-release/semantic-release\">semantic-release\u003C/a> has the solution, and I used it in some of my other projects.\u003C/p>\n\u003Cp>I started exploring a solution. I found an \u003Ca href=\"https://github.com/mystster/semantic-release-github-electron-builder\">electron release plugin\u003C/a> for the semantic release package but found it complicated. I decided to hack the semantic release process and use it only to update the version number (it can publish) and push the tag to GitHub. Electron builder can publish the release to GitHub, so I don’t need any extra hacking to publish the release. The process looks like this:\u003C/p>\n\u003Cul>\n\u003Cli>Configure semantic release\u003C/li>\n\u003Cli>Prepare the npm script\u003C/li>\n\u003Cli>Configure GitHub action\u003C/li>\n\u003C/ul>\n\u003Cp>Let’s explore the process in detail.\u003C/p>\n\u003Ch2 id=\"configure-semantic-release\">Configure semantic release\u003C/h2>\n\u003Cp>First, we will install \u003Ccode>semantic-release\u003C/code> as a dev dependency with other related plugins.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">npm\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> i\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> -D\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> semantic-release\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> @semantic-release/commit-analyzer\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> @semantic-release/npm\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> @semantic-release/git\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> semantic-release-export-data\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Now we need to configure it in such a way that it will calculate the upcoming version number from the commit message and expose it to the GitHub workflow environment. We need to add the following code in a file named \u003Ccode>release.config.js\u003C/code> at the root of our project folder.\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"js\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">module\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">.\u003C/span>\u003Cspan style=\"color:#F767BB;--shiki-dark:#0DB9D7\">exports\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> =\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    branches\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">main\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">next\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">next-major\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        {\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">beta\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> prerelease\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        {\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">alpha\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\"> prerelease\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    ]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">    plugins\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">@semantic-release/commit-analyzer\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">semantic-release-export-data\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">        '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">@semantic-release/npm\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">            '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">@semantic-release/git\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#73DACA\">                assets\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\"> [\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">package.json\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">package-lock.json\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            }\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">        ]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">    ]\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">}\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">;\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Here \u003Ca href=\"https://github.com/felipecrs/semantic-release-export-data\">semantic-release-export-data\u003C/a> plugin will help us to expose the next release version to the GitHub\naction environment. We will use that version number to name our releases in the build step.\u003C/p>\n\u003Ch2 id=\"prepare-the-npm-script\">Prepare the npm script\u003C/h2>\n\u003Cp>We need an npm script to run the \u003Ccode>semantic-release\u003C/code> command. In our \u003Ccode>package.json\u003C/code> in the scripts section, we will add the following commands:\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">release\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#A9B1D6\">: \u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">electron-builder --config .electron-builder.config.js --publish always\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#A9B1D6\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">updateVersion\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#A9B1D6\">: \u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">semantic-release\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>In the \u003Ccode>release\u003C/code> script, we added \u003Ccode>--publish always\u003C/code> to tell electron builder to publish it to GitHub.\u003C/p>\n\u003Ch2 id=\"configure-github-action\">Configure GitHub action\u003C/h2>\n\u003Cp>Now we will configure our GitHub workflow to combine all the steps.\u003C/p>\n\u003Cul>\n\u003Cli>First, we will set up a job to run semantic-release in dry mode to expose the upcoming version number (if releasable) to the GitHub action environment (job name \u003Ccode>get-next-version\u003C/code>)\u003C/li>\n\u003Cli>Then, we will create a release draft with a release note (job name \u003Ccode>draft\u003C/code>)\u003C/li>\n\u003Cli>Finally, we will build the production release and upload the artifacts to GitHub (job name \u003Ccode>upload_artifacts\u003C/code>).\u003C/li>\n\u003C/ul>\n\u003Cp>Before building the production release, we will run the \u003Ccode>updateVersion\u003C/code> script we defined earlier. It will generate the upcoming version number and tag and push the version tag to GitHub. Then we will put the version number in a file named \u003Ccode>meta.json\u003C/code> inside our \u003Ccode>buildResources\u003C/code> folder at the root of our project. Finally, we will build our project for production and run the \u003Ccode>release\u003C/code> script to release the app to GitHub. Following is the complete workflow configuration:\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Release A New Version\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\">on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">workflow_call\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> workflow_dispatch\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">concurrency\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    group\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> release-${{ github.ref }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    cancel-in-progress\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">defaults\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        shell\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">bash\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    GH_TOKEN\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ secrets.github_token }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">jobs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    get-next-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        runs-on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ubuntu-latest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        steps\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/checkout@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/setup-node@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  node-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 16\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm ci\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npx semantic-release --dry-run\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              id\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> get-next-version\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  GITHUB_TOKEN\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ secrets.github_token }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        outputs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">            new-release-published\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ steps.get-next-version.outputs.new-release-published }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">            new-release-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ steps.get-next-version.outputs.new-release-version }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    draft\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        needs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">get-next-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        runs-on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ubuntu-latest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> needs.get-next-version.outputs.new-release-published == 'true'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        steps\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/checkout@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  fetch-depth\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/setup-node@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  node-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 16\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Show version\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> echo \"Next Version is ${{ needs.get-next-version.outputs.new-release-version }} (${{ github.ref_name }})\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Get last git tag\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              id\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> tag\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> echo \"last-tag=$(git describe --tags --abbrev=0 || git rev-list --max-parents=0 ${{github.ref}})\" >> $GITHUB_OUTPUT\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Generate release notes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ./.github/actions/release-notes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              id\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> release-note\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  from\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ steps.tag.outputs.last-tag }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  to\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ github.ref }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  include-commit-body\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  include-abbreviated-commit\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Delete outdated drafts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> hugo19941994/delete-draft-releases@v1.0.0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  GITHUB_TOKEN\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ secrets.GITHUB_TOKEN }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Create Release Draft\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> softprops/action-gh-release@v1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  GITHUB_TOKEN\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ secrets.github_token }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  prerelease\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  draft\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  tag_name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> v${{ needs.get-next-version.outputs.new-release-version }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> v${{ needs.get-next-version.outputs.new-release-version }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  body\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ steps.release-note.outputs.release-note }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        outputs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">            release-note\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ steps.release-note.outputs.release-note }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">            version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ needs.get-next-version.outputs.new-release-version }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    upload_artifacts\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        needs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">draft\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        strategy\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">            matrix\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                os\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">macos-latest\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ubuntu-latest\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> windows-latest\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        runs-on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ matrix.os }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        steps\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/checkout@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> actions/setup-node@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              with\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  node-version\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 16\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  cache\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">npm\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm ci\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#FF5C57;--shiki-dark:#FF9E64\"> 1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Prepare release notes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  RELEASE_NOTE\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ needs.draft.outputs.release-note }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> echo \"$RELEASE_NOTE\" >> ./buildResources/release-notes.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Show version\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> echo \"Next Version is ${{ needs.draft.outputs.version }} (${{ github.ref_name }})\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Update and push version tag\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm run updateVersion\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Write next version to meta.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> echo \"{\\\"version\\\":\\\"${{ needs.draft.outputs.version }}\\\"}\" >| ./buildResources/meta.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Build the app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  MODE\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">production\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm run build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Compile &#x26; release Electron app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              id\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> release-to-github\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              env\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">                  VITE_APP_VERSION\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ${{ needs.draft.outputs.version }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> npm run release\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\"> name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> Delete tag for failed release\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> steps.release-to-github.outcome == 'failure'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">              run\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> git push --delete origin v${{ needs.draft.outputs.version }}```\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>If you want to see the complete process in action or want to contribute to the open source \u003Ccode>Deskaide\u003C/code> project, please check out the \u003Ca href=\"https://github.com/deskaide/deskaide\">repository\u003C/a> here.\u003C/p>\n\u003Ch2 id=\"hard-lesson\">Hard Lesson\u003C/h2>\n\u003Cblockquote>\n\u003Cp>If you use modular GitHub workflows (different jobs in different files) and any lower-level actions need to access any secret value, you must tell the root workflow to pass the secret value to that action.\u003C/p>\n\u003C/blockquote>\n\u003Cp>In my \u003Ccode>ci.yaml\u003C/code> file:\u003C/p>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"yaml\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"># This workflow is the entry point for all CI processes.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"># It is from here that all other workflows launch.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\">on\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    push\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        branches\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> main\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> alpha\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> beta\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        paths-ignore\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">**.md\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> .editorconfig\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> .gitignore\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    pull_request\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        paths-ignore\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> '\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">**.md\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> .editorconfig\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#9ABDF5\">            -\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> .gitignore\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">concurrency\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    group\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ci-${{ github.ref }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    cancel-in-progress\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#FF9E64\"> true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">jobs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    lint\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ./.github/workflows/lint.yml\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    typechecking\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ./.github/workflows/typechecking.yml\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    tests\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ./.github/workflows/tests.yml\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">    draft_release\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        if\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> github.event_name == 'push' &#x26;&#x26; (github.ref_name == 'alpha' || github.ref_name == 'beta' || github.ref_name == 'main')\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        needs\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> [\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">typechecking\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">,\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> tests\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        uses\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ./.github/workflows/release.yml\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#11658F;--shiki-dark:#F7768E\">        secrets\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">:\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> inherit\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # &#x3C;- THIS IS WHAT I AM TALKING ABOUT\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",{"headings":411,"localImagePaths":422,"remoteImagePaths":423,"frontmatter":424,"imagePaths":430},[412,415,418,421],{"depth":247,"slug":413,"text":414},"configure-semantic-release","Configure semantic release",{"depth":247,"slug":416,"text":417},"prepare-the-npm-script","Prepare the npm script",{"depth":247,"slug":419,"text":420},"configure-github-action","Configure GitHub action",{"depth":247,"slug":290,"text":291},[],[],{"title":398,"slug":395,"isPublished":16,"publishedAt":425,"tags":426,"metaInfo":427,"excerpt":428,"minutesRead":429},"2023-02-20T03:45:29.958Z",[401,402],{"description":404},"I have been working on a personal desktop project (Deskaide) for about one year and finished some basic features recently. So I decided to publish an alpha version...","6 min read",[],"release-electron-app-to-github-using-semantic-release-and-electron-builder.md","cheatsheets",["Map",434,435],"tmux",{"id":434,"data":436,"body":440,"filePath":441,"digest":442,"rendered":443,"legacyId":463},{"title":437,"description":438,"isPublished":16,"publishedAt":439},"Tmux Cheat Sheet","Some useful tmux commands and configs",["Date","2024-09-20T07:45:29.958Z"],"## Prefix `Ctrl+space`\n\n## Config\n\n```tmux\nset-option -sa terminal-overrides \",xterm*:Tc\"\nset-option -g allow-passthrough on\n\nunbind C-b\nset -g prefix C-Space\nbind C-Space send-prefix\n\nbind -n M-H previous-window\nbind -n M-L next-window\n\n# Plugins\n\nset -g @plugin 'tmux-plugins/tpm'\nset -g @plugin 'tmux-plugins/tmux-sensible'\nset -g @plugin 'christoomey/vim-tmux-navigator'\nset -g @plugin 'tmux-plugins/tmux-yank'\nset -g @plugin 'tmux-plugins/tmux-resurrect'\nset -g @plugin 'tmux-plugins/tmux-open'\n\nset-option -g mouse on\nset -g @continuum-restore 'on'\n\n# Theme\nsource-file ~/.config/tmux/tmux.theme.dark\n# source-file ~/.config/tmux/tmux.theme.light\n\nset -g @plugin 'tmux-plugins/tmux-cpu'\nset -g @plugin 'tmux-plugins/tmux-continuum'\n\nset-environment -g PATH \"$HOMEBREW_PREFIX/bin:/usr/local/bin:/bin:/usr/bin:/usr/sbin:/sbin\"\n\nrun '$HOMEBREW_PREFIX/opt/tpm/share/tpm/tpm'\n```\n\n## Commands\n\n```sh\ntmux ls # list sessions\n```\n\n```sh\ntmux new -s session_name # create new session\n```\n\n```sh\ntmux a -t session_name # attach to an existing session\n```\n\n```sh\ntmux new-window -n \"my_window\" # create new window\n```\n\n```sh\ntmux kill-server # kill all servers\n```\n\n```sh\nPrefix + ( # next session\nPrefix + ) # prev session\nPrefix + d # detach session\nPrefix + w # show all sessions with windows\nPrefix + c # create new window\nPrefix + p # prev window\nPrefix + n # next window\nPrefix + % # create new pan side\nPrefix + \" # create new pan below\nPrefix + & # kills a session\n```","src/content/cheatsheets/tmux.md","be5a44c72c7640ed",{"html":444,"metadata":445},"\u003Ch2 id=\"prefix-ctrlspace\">Prefix \u003Ccode>Ctrl+space\u003C/code>\u003C/h2>\n\u003Ch2 id=\"config\">Config\u003C/h2>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>set-option -sa terminal-overrides \",xterm*:Tc\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set-option -g allow-passthrough on\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>unbind C-b\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g prefix C-Space\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>bind C-Space send-prefix\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>bind -n M-H previous-window\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>bind -n M-L next-window\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Plugins\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tpm'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-sensible'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'christoomey/vim-tmux-navigator'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-yank'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-resurrect'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-open'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set-option -g mouse on\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @continuum-restore 'on'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># Theme\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>source-file ~/.config/tmux/tmux.theme.dark\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan># source-file ~/.config/tmux/tmux.theme.light\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-cpu'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set -g @plugin 'tmux-plugins/tmux-continuum'\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>set-environment -g PATH \"$HOMEBREW_PREFIX/bin:/usr/local/bin:/bin:/usr/bin:/usr/sbin:/sbin\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>run '$HOMEBREW_PREFIX/opt/tpm/share/tpm/tpm'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"commands\">Commands\u003C/h2>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">tmux\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> ls\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # list sessions\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">tmux\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> new\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> -s\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> session_name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # create new session\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">tmux\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> a\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> -t\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> session_name\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # attach to an existing session\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">tmux\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> new-window\u003C/span>\u003Cspan style=\"color:#2DAE58;--shiki-dark:#E0AF68\"> -n\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">my_window\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\">\"\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # create new window\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">tmux\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> kill-server\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # kill all servers\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"astro-code astro-code-themes snazzy-light tokyo-night\" style=\"background-color:#FAFBFC;--shiki-dark-bg:#1a1b26;color:#565869;--shiki-dark:#a9b1d6; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"sh\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#A9B1D6\"> ( \u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"># next session\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#565869;--shiki-dark:#A9B1D6\"> ) \u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"># prev session\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> d\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # detach session\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> w\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # show all sessions with windows\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> c\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # create new window\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> p\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # prev window\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> n\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # next window\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> %\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-light-font-style:inherit;--shiki-dark:#51597D;--shiki-dark-font-style:italic\"> # create new pan side\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#09A1ED;--shiki-dark:#C0CAF5\">Prefix\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> +\u003C/span>\u003Cspan style=\"color:#ADB1C2;--shiki-dark:#89DDFF\"> \"\u003C/span>\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\"> # create new pan below\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#CF9C00;--shiki-dark:#9ECE6A\">Prefix + &#x26; # kills a session\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",{"headings":446,"localImagePaths":456,"remoteImagePaths":457,"frontmatter":458,"imagePaths":462},[447,450,453],{"depth":247,"slug":448,"text":449},"prefix-ctrlspace","Prefix Ctrl+space",{"depth":247,"slug":451,"text":452},"config","Config",{"depth":247,"slug":454,"text":455},"commands","Commands",[],[],{"title":437,"description":438,"isPublished":16,"publishedAt":459,"excerpt":460,"minutesRead":461},"2024-09-20T07:45:29.958Z","Prefix Ctrl+spaceConfigset-option -sa terminal-overrides \",xterm*:Tc\"\nset-option -g allow-passthrough on\n\nunbind C-b\nset -g prefix C-Space\nbind C-Space send-prefix\n\nbind -n M-H previous-window\nbind -n M-L next-window\n\n# Plugins\n\nset -g @plugin 'tmux-plugins/tpm'\nset -g @plugin 'tmux-plugins/tmux-sensible'\nset -g...","1 min read",[],"tmux.md"]